/*!
  Tinycon - A small library for manipulating the Favicon
  Tom Moor, http://tommoor.com
  Copyright (c) 2012 Tom Moor
  MIT Licensed
  @version 0.5
*/
(function(){var a={};var v=null;var q=null;var e=document.title;var m=null;var c=null;var d={};var g={width:7,height:9,font:"10px arial",colour:"#ffffff",background:"#F03D25",fallback:true,abbreviate:true};var p=(function(){var w=navigator.userAgent.toLowerCase();return function(x){return w.indexOf(x)!==-1}}());var t={ie:p("msie"),chrome:p("chrome"),webkit:p("chrome")||p("safari"),safari:p("safari")&&!p("chrome"),mozilla:p("mozilla")&&!p("chrome")&&!p("safari")};var k=function(){var x=document.getElementsByTagName("link");for(var y=0,w=x.length;y<w;y++){if((x[y].getAttribute("rel")||"").match(/\bicon\b/)){return x[y]}}return false};var j=function(){var x=document.getElementsByTagName("link");var z=document.getElementsByTagName("head")[0];for(var y=0,w=x.length;y<w;y++){var A=(typeof(x[y])!=="undefined");if(A&&(x[y].getAttribute("rel")||"").match(/\bicon\b/)){z.removeChild(x[y])}}};var i=function(){if(!q||!v){var w=k();q=v=w?w.getAttribute("href"):"/favicon.ico"}return v};var b=function(){if(!c){c=document.createElement("canvas");c.width=16;c.height=16}return c};var n=function(w){j();var x=document.createElement("link");x.type="image/x-icon";x.rel="icon";x.href=w;document.getElementsByTagName("head")[0].appendChild(x)};var f=function(w){if(window.console){window.console.log(w)}};var u=function(w,y){if(!b().getContext||t.ie||t.safari||d.fallback==="force"){return r(w)}var x=b().getContext("2d");var y=y||"#000000";var z=i();m=new Image();m.onload=function(){x.clearRect(0,0,16,16);x.drawImage(m,0,0,m.width,m.height,0,0,16,16);if((w+"").length>0){h(x,w,y)}l()};if(!z.match(/^data/)){m.crossOrigin="anonymous"}m.src=z};var r=function(w){if(d.fallback){if((w+"").length>0){document.title="("+w+") "+e}else{document.title=e}}};var h=function(A,z,D){if(typeof z=="number"&&z>99&&d.abbreviate){z=o(z)}var x=(z+"").length-1;var C=d.width+(6*x);var y=16-C;var B=16-d.height;A.font=(t.webkit?"bold ":"")+d.font;A.fillStyle=d.background;A.strokeStyle=d.background;A.lineWidth=1;A.fillRect(y,B,C-1,d.height);A.beginPath();A.moveTo(y-0.5,B+1);A.lineTo(y-0.5,15);A.stroke();A.beginPath();A.moveTo(15.5,B+1);A.lineTo(15.5,15);A.stroke();A.beginPath();A.strokeStyle="rgba(0,0,0,0.3)";A.moveTo(y,16);A.lineTo(15,16);A.stroke();A.fillStyle=d.colour;A.textAlign="right";A.textBaseline="top";A.fillText(z,15,t.mozilla?7:6)};var l=function(){if(!b().getContext){return}n(b().toDataURL())};var o=function(w){var y=[["G",1000000000],["M",1000000],["k",1000]];for(var x=0;x<y.length;++x){if(w>=y[x][1]){w=s(w/y[x][1])+y[x][0];break}}return w};var s=function(y,w){var x=new Number(y);return x.toFixed(w)};a.setOptions=function(x){d={};for(var w in g){d[w]=x.hasOwnProperty(w)?x[w]:g[w]}return this};a.setImage=function(w){v=w;l();return this};a.setBubble=function(w,x){w=w||"";u(w,x);return this};a.reset=function(){n(q)};a.setOptions(g);window.Tinycon=a})();
/*! NChat client
 *  github.com/bfontaine/NChat
 *  MIT Licensed
 */
(function(l,h){var m=io.connect(document.location.origin),j=l.getElementById("chat-msgs"),c=l.getElementById("new-msg"),k=document.title,d=""+h,b=0;function g(n){document.title=!n?k:k+" | "+n}function i(){var n=c.innerHTML.trim();if(!n){return}e(false);m.emit("msg",{text:n});c.innerHTML=""}function e(n){c.setAttribute("contenteditable",n);if(n){c.focus()}}c.onkeypress=c.onkeydown=function(n){if((n.which||n.keyCode)===13){i()}};c.onfocus=function(){Tinycon.setBubble(0)};e(false);m.on("registration-ok",function(n){g();e(true)});var f=function(n,o){j.innerHTML+=n.html;if(o){l.querySelector("#m_"+n.id+" .user").className+=" me"}j.scrollTop=j.scrollHeight;Tinycon.setBubble(++b)};m.on("msg-ok",function(n){b=-1;f(n,true);e(true)});m.on("cmd-ok",function(n){f(n);e(true)});m.on("new-msg",f);m.on("registration-fail",function(n){m.emit("registration",{username:prompt(n.text+" Choose an username")})});m.on("msg-fail",function(n){console.log(n);if(/no registered username/i.test(n)){m.emit("registration",{username:prompt(n.text+" Choose an username")})}});m.on("username-lookup",function(n){if(n.username){g();e(true);c.focus()}else{m.emit("registration",{username:prompt("Choose an username")})}});m.on("registration-ok",function(){g();e(true);c.focus()});m.on("progression",function(n){g(n.text)});var a=(typeof l.hidden!==d)?["hidden",""]:typeof l.mozHidden!==d?["mozHidden","moz"]:typeof l.msHidden!==d?["msHidden","ms"]:typeof l.webkitHidden!==d?["webkitHidden","webkit"]:["",""];document.addEventListener(a[1]+"visibilitychange",function(){b=0;console.log(document[a[0]]);if(!document[a[0]]){Tinycon.reset()}},false)})(document);